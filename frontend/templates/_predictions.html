<table class="aligned_table" style="padding-right: 2em;">
<tr><td class="bold">Predict</td><td>
<select class="target_meta" data-placeholder="select variable(s)" multiple>
{% for key, name in meta_pairs %}
  <option value="{{key}}">{{name}}</option>
{% end %}
</select></td></tr>
<tr><td class="bold">Model</td><td>
<select id="regress_kind" onchange="change_regression_kind(this);">
  <option value="pls1" selected>PLS-1 (Univariate)</option>
  <option value="pls2">PLS-2 (Multivariate)</option>
  <option value="lasso">Lasso (Multivariate)</option>
</select></td></tr>
</table>

<table class="aligned_table" style="padding-right: 2em;">
<tr class="for_pls"><td class="bold">PLS components</td><td>
  <input type="number" id="cv_min_comps" value=2 min=1 max=100> -
  <input type="number" id="cv_max_comps" value=10 min=1 max=100>
</td></tr>
<tr><td class="bold">Cross validation</td><td>
  {# TODO: add other CV strategy (stratified?) #}
  <label><input type="number" id="cv_folds" value=5 min=1 max=100> folds</label>
</td></tr>
<tr><td colspan=2>
  <button disabled class="needs_filter" onclick="run_crossval(this);">
    Select<span class="wait">ing</span> model<span class="wait">...</span>
  </button>
  <div class="err_msg"></div>
</td></tr>
</table>

<table class="aligned_table"><tbody>
<tr><td>
  <button disabled class="needs_filter" onclick="train_model(this);">
  Train<span class="wait">ing...</span></button>
</td><td>
  <label class="for_pls">
    <input type="number" id="pls_comps" value=6 min=1 max=100> components
  </label>
  <label class="for_lasso" style="display: none;">
    <input type="text" id="lasso_alpha" value=0.01 size=5> alpha
  </label>
</td></tr>
<tr><td>
  <button disabled class="needs_filter" onclick="upload_model(this);">
  Upload<span class="wait">ing...</span></button>
</td><td>
  <input type="file" id="modelfile" />
</td></tr></tbody>
<tfoot>
<tr><td colspan=2 class="err_msg"></td></tr>
</tfoot></table>

<div style="text-align: left;">
{# info: ds_kind, (ds_name), vars, uni/multivariate, n_comps #}
<div>Current Model: <span id="model_info">None</span></div>

<button disabled class="needs_model" onclick="run_preds(this);">
Run<span class="wait">ning</span> predictions<span class="wait">...</span>
</button>
<button disabled class="needs_model" onclick="plot_coefs(this);">
Plot<span class="wait">ting</span> coefficients<span class="wait">...</span>
</button>
<div class="err_msg"></div>

<table id="model_error" style="display: none;">
  <thead><tr><th>Variable</th><th>RÂ²</th><th>RMSE</th></tr></thead>
  <tbody></tbody>
</table>

<button disabled class="needs_model" onclick="predict_download(this);">
Download</button>
<select style="vertical-align: baseline;">
  <option value="preds">predictions</option>
  <option value="pkl">model (binary file)</option>
  <option value="csv">coefficients (text file)</option>
</select>
</div>
